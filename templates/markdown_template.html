<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta
            name="description"
            content="alberto@barrahome.org:~$ - personal blog, technical notes and experiments"
        />
        <meta name="author" content="Alberto Ferrer" />
        <meta name="robots" content="index, follow" />
        <meta property="og:site_name" content="alberto@barrahome.org:~$" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="alberto@barrahome.org:~$" />
        <meta
            property="og:description"
            content="Personal blog, technical notes and experiments"
        />
        <meta property="og:url" content="https://barrahome.org" />
        <meta name="theme-color" content="#0a0a0a" />
        <link rel="canonical" href="https://barrahome.org" />
        <link
            rel="sitemap"
            type="application/xml"
            title="Sitemap"
            href="/sitemap.xml"
        />
        <link
            rel="alternate"
            type="text/plain"
            title="LLM Context"
            href="/llm.txt"
        />
        <title>alberto@barrahome.org:~$</title>
        <link rel="stylesheet" href="/css/style.css" />
        <script src="/js/tags.js"></script>
    </head>
    <body>
        <div class="window">
            <div class="titlebar">
                <div class="titlebar-buttons-left">
                    <div class="titlebar-btn">&#9866;</div>
                </div>
                <div class="titlebar-title">alberto@barrahome.org:~$</div>
                <div class="titlebar-buttons-right">
                    <div class="titlebar-btn">&#9634;</div>
                    <div class="titlebar-btn">&#10005;</div>
                </div>
            </div>

            <div class="main-area">
                <div class="sidebar">
                    <div class="sidebar-section">
                        <div class="sidebar-title">Navigation</div>
                        <div class="sidebar-panel">
                            <a href="/" class="sidebar-link">Home</a>
                            <a href="/projects.md" class="sidebar-link"
                                >Projects</a
                            >
                            <a href="/contact.md" class="sidebar-link"
                                >Contact</a
                            >
                            <a href="/cv.md" class="sidebar-link">CV/Resume</a>
                        </div>
                    </div>
                    <div
                        class="sidebar-section"
                        id="tags-section"
                        style="display: none"
                    >
                        <div class="sidebar-title">Tags</div>
                        <div class="sidebar-panel" id="tags-panel"></div>
                    </div>
                </div>

                <div class="terminal-frame">
                    <div class="terminal">
                        <div class="content">{{content}}</div>
                    </div>
                </div>
            </div>

            <div class="statusbar">
                <span
                    >&#x1F4C2;
                    <a
                        href="https://github.com/bet0x/barrahome-2026"
                        class="statusbar-link"
                        >Git SRC</a
                    >
                    &#128025;
                    <a href="https://github.com/bet0x" class="statusbar-link"
                        >GitHub</a
                    >
                    &#x1F4BC;
                    <a
                        href="https://www.linkedin.com/in/bet0x/"
                        class="statusbar-link"
                        >LinkedIn</a
                    ></span
                >
                <span
                    >&copy; 2026 barrahome.org // powered by nginx +
                    markdown</span
                >
            </div>
        </div>

        <script>
            (function () {
                // highlight active navigation link
                var path = window.location.pathname;
                var links = document.querySelectorAll(".sidebar-link");
                links.forEach(function (link) {
                    var href = link.getAttribute("href");
                    if (
                        path === href ||
                        (href === "/" && (path === "/" || path === "/index.md"))
                    ) {
                        link.classList.add("active");
                    }
                });

                // set page title from first heading
                var l = ["h1", "h2", "h3"];
                for (var i = 0; i < l.length; i++) {
                    var h = document.getElementsByTagName(l[i]);
                    if (h.length > 0) {
                        document.title = h[0].innerText + " - barrahome.org";
                        break;
                    }
                }

                // global tags sidebar from tags.js
                var tagsSection = document.getElementById("tags-section");
                var tagsPanel = document.getElementById("tags-panel");
                if (
                    typeof defined_tags !== "undefined" &&
                    defined_tags.length > 0
                ) {
                    var params = new URLSearchParams(window.location.search);
                    var selectedTag = params.get("tag") || "all";
                    var isIndex = path === "/" || path === "/index.md";

                    // create "all" button
                    var allBtn = document.createElement("a");
                    allBtn.href = "/?tag=all";
                    allBtn.className = "sidebar-tag";
                    allBtn.textContent = "all";
                    if (selectedTag === "all") allBtn.classList.add("active");
                    tagsPanel.appendChild(allBtn);

                    // create tag buttons
                    defined_tags.forEach(function (tag) {
                        var btn = document.createElement("a");
                        btn.href = "/?tag=" + encodeURIComponent(tag);
                        btn.className = "sidebar-tag";
                        btn.textContent = tag;
                        if (tag === selectedTag) btn.classList.add("active");
                        tagsPanel.appendChild(btn);
                    });

                    tagsSection.style.display = "";

                    // on index page: handle filtering
                    if (isIndex) {
                        var content = document.querySelector(".content");
                        var firstP = content
                            ? content.querySelector("p:first-child")
                            : null;

                        // remove the Filter: line and hr from content
                        if (firstP && firstP.textContent.match(/Filter:/)) {
                            var hr = firstP.nextElementSibling;
                            if (hr && hr.tagName === "HR") hr.remove();
                            firstP.remove();
                        }

                        var items = content
                            ? content.querySelectorAll("li")
                            : [];

                        // hide inline tag codes in post list
                        items.forEach(function (li) {
                            li.querySelectorAll("code").forEach(function (c) {
                                c.style.display = "none";
                            });
                        });

                        // apply filter from URL parameter
                        if (selectedTag !== "all") {
                            items.forEach(function (li) {
                                var codes = li.querySelectorAll("code");
                                var match = false;
                                codes.forEach(function (c) {
                                    if (c.textContent.trim() === selectedTag)
                                        match = true;
                                });
                                li.classList.toggle("hidden-tag", !match);
                            });
                        }

                        // click handler for in-page filtering (no reload)
                        tagsPanel.addEventListener("click", function (e) {
                            if (!e.target.classList.contains("sidebar-tag"))
                                return;
                            e.preventDefault();
                            var val = e.target.textContent.trim();

                            // update URL without reload
                            history.pushState(
                                null,
                                "",
                                "/?tag=" + encodeURIComponent(val),
                            );

                            tagsPanel
                                .querySelectorAll(".sidebar-tag")
                                .forEach(function (t) {
                                    t.classList.remove("active");
                                });
                            e.target.classList.add("active");

                            items.forEach(function (li) {
                                if (val === "all") {
                                    li.classList.remove("hidden-tag");
                                    return;
                                }
                                var codes = li.querySelectorAll("code");
                                var match = false;
                                codes.forEach(function (c) {
                                    if (c.textContent.trim() === val)
                                        match = true;
                                });
                                li.classList.toggle("hidden-tag", !match);
                            });
                        });
                    }
                }
            })();
        </script>
        <script src="/js/barrahome-terminal.js"></script>
        <script type="module">
            import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs";
            mermaid.initialize({ startOnLoad: true, theme: "dark" });
        </script>
    </body>
</html>
